(function(){var e={init:function(){this.simonSays=$(".simon-says");this.circle1=$(".circle-1");this.circle2=$(".circle-2");this.circle3=$(".circle-3");this.circle4=$(".circle-4");this.circles=[e.circle1,e.circle2,e.circle3,e.circle4];e.simonSaysHandler("Start the simon");this.array=[];this.shortArray=[];this.playerArray=[];this.roundNumber=0;this.clickTime=200;this.waitTime=600;this.gameOn=!1;this.gameOver=!1;this.events()},events:function(){this.simonSays.on("click",this.start)},start:function(){if(!e.gameOn){e.gameOver?$('*[class^="circle"]').off("click",e.checkPlayer):$('*[class^="circle"]').on("click",e.checkPlayer);$.each(e.circles,e._onCircleClick);e.gameOn=!0;e.newRound()}},simonSaysHandler:function(t){var n=e.simonSays.height();if(Array.isArray(t))var r=t[Math.floor(Math.random()*t.length)];else var r=t;var i=e.simonSays.html("<p>"+r+"</p>").children("p"),s=i.height(),o=(n-s)/2;i.animate({marginTop:o})},newRound:function(){e.delayTime=this.clickTime+200;e.roundNumber++;e.simonSaysHandler("round");setTimeout(function(){e.simonSaysHandler(e.roundNumber)},e.waitTime);setTimeout(function(){e.computerPlays()},e.waitTime*2);setTimeout(function(){e._onComputerFinished()},e.waitTime*2+e.delayTime*e.roundNumber)},computerPlays:function(){e.addRandomNumberToArray(e.array);e.shortArray=e.arrayShortener(e.array);e.simulateClicks(e.array)},simulateClicks:function(t){e.delayTime=this.clickTime+200;$.each(t,function(t,n){setTimeout(function(t){e.simulateClick(n)},e.delayTime*t)})},simulateClick:function(t){t.trigger("mousedown");setTimeout(function(){t.trigger("mouseup")},e.clickTime)},arrayShortener:function(e){var t=0,n=[];$.map(e,function(e){var t=e.selector.replace(".circle-","");n.push(t)});return n},addRandomNumberToArray:function(t){return t.push(e.circles[Math.floor(Math.random()*4)])},checkPlayer:function(){if(e.playerArray.length<e.shortArray.length){e._onRightGuess.call(this);e.playerArray[e.playerArray.length-1]!=e.shortArray[e.playerArray.length-1]&&e._onWrongGuess()}e.areArraysEqual(e.playerArray,e.shortArray)&&e._onLevelComplete()},_onRightGuess:function(){var t=$(this).attr("class").replace("circle-","");e.playerArray.push(t)},_onWrongGuess:function(){e.gameOver||e.playerDies()},_onLevelComplete:function(){e.simonSaysHandler(["well done","good job","congrats!","master!","keep goin'","you rock"]);setTimeout(function(){e.playerArray=[];e.newRound();item=""},e.waitTime*2)},_onComputerFinished:function(){e.simonSaysHandler(["your turn","play now"])},_onCircleClick:function(){$(this).on("mousedown",function(){var e=$(this).attr("class").replace("circle-","");MIDI.noteOn(60,e*2+73,50,0);$(this).addClass("active")}).on("mouseup",function(){$(this).removeClass("active")})},areArraysEqual:function(e,t){return JSON.stringify(e)==JSON.stringify(t)},playerDies:function(){var t=e.shortArray.length-1;e.simonSaysHandler("Score: "+t);e.gameOver=!0}};MIDI.loadPlugin(function(){e.init()})})();